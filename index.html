<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>League Builder UI</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg-0:#070A12; --bg-1:#0B1020;
      --stroke:rgba(255,255,255,.09); --stroke-2:rgba(255,255,255,.06);
      --text:rgba(255,255,255,.92); --muted:rgba(255,255,255,.64); --faint:rgba(255,255,255,.42);
      --accent:#B04BFF; --good:#4BE38B; --bad:#FF4D6D;
      --shadow:0 14px 35px rgba(0,0,0,.45); --shadow-soft:0 10px 24px rgba(0,0,0,.32);
      --font: Inter, "Noto Sans JP", system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Apple Color Emoji","Segoe UI Emoji";
      --r-xl:18px;
    }
    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0; font-family:var(--font); color:var(--text);
      background:
        radial-gradient(1200px 600px at 72% 16%, rgba(176,75,255,.22), transparent 55%),
        radial-gradient(900px 520px at 20% 12%, rgba(122,60,255,.12), transparent 60%),
        radial-gradient(700px 500px at 26% 92%, rgba(75,227,139,.08), transparent 55%),
        linear-gradient(180deg, var(--bg-0), var(--bg-1));
      overflow-x:hidden;
    }
    .app{ max-width:1200px; margin:0 auto; padding:22px 18px 34px; }

    .topbar{
      display:flex; gap:12px; align-items:center; justify-content:space-between;
      padding:14px 16px; border:1px solid var(--stroke);
      background:linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
      border-radius:var(--r-xl); box-shadow:var(--shadow-soft);
      backdrop-filter: blur(10px);
      position: sticky; top: 10px; z-index: 3;
    }
    .brand{ display:flex; align-items:center; gap:10px; min-width:220px; }
    .logoMark{
      width:38px; height:38px; border-radius:12px;
      background:
        radial-gradient(16px 16px at 30% 30%, rgba(255,255,255,.35), transparent 60%),
        linear-gradient(135deg, rgba(176,75,255,.95), rgba(122,60,255,.55));
      border:1px solid rgba(255,255,255,.14);
      box-shadow: 0 10px 20px rgba(176,75,255,.12);
    }
    .brand h1{ margin:0; font-size:14px; line-height:1.1; letter-spacing:.2px; }
    .brand p{ margin:2px 0 0; font-size:12px; color:var(--muted); }
    .actions{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; justify-content:flex-end; }
    .pill{
      display:inline-flex; align-items:center; gap:8px;
      padding:10px 12px; border-radius:999px; border:1px solid var(--stroke);
      background: rgba(0,0,0,.18);
      color:var(--muted); font-size:12px; user-select:none;
    }
    .dot{ width:8px; height:8px; border-radius:99px; background:var(--good); box-shadow:0 0 0 4px rgba(75,227,139,.12); }

    .btn{
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      color:var(--text);
      padding:10px 12px; border-radius:12px;
      cursor:pointer; font-weight:800; font-size:13px;
      transition: transform .06s ease, background .16s ease, border-color .16s ease, filter .16s ease;
      white-space:nowrap;
    }
    .btn:hover{ background: rgba(255,255,255,.09); border-color: rgba(255,255,255,.16); }
    .btn:active{ transform: translateY(1px); }
    .btn.primary{
      border-color: rgba(176,75,255,.35);
      background: linear-gradient(135deg, rgba(176,75,255,.92), rgba(122,60,255,.72));
      box-shadow: 0 10px 22px rgba(176,75,255,.18);
    }
    .btn.primary:hover{ filter: brightness(1.04); }
    .btn.danger{ border-color: rgba(255,77,109,.26); background: rgba(255,77,109,.08); }
    .btn.ghost{ background: rgba(0,0,0,.20); border-color: rgba(255,255,255,.10); }
    .btn.small{ padding:8px 10px; border-radius:11px; font-size:12px; }

    .grid{ margin-top:16px; display:grid; grid-template-columns: 1fr 1fr; gap:16px; align-items:start; }
    @media (max-width:980px){ .grid{ grid-template-columns:1fr; } .brand{ min-width:auto; } }

    .card{
      border:1px solid var(--stroke);
      border-radius:var(--r-xl);
      background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      overflow:hidden;
    }
    .cardHead{
      display:flex; align-items:center; justify-content:space-between;
      padding:12px 14px;
      border-bottom:1px solid var(--stroke-2);
      background: linear-gradient(180deg, rgba(0,0,0,.12), transparent);
      gap:10px;
    }
    .cardHead .title{ display:flex; flex-direction:column; gap:2px; min-width:0;}
    .cardHead h2{ margin:0; font-size:13px; letter-spacing:.2px; }
    .cardHead p{ margin:0; font-size:12px; color:var(--muted); }
    .cardBody{ padding:12px 14px 14px; }

    .field{ display:flex; flex-direction:column; gap:6px; }
    .label{ font-size:12px; color:var(--muted); }
    .input,.select,.textarea{
      width:100%;
      min-height:40px;
      padding:10px 12px;
      border-radius:12px;
      border:1px solid var(--stroke);
      background: rgba(0,0,0,.22);
      color:var(--text);
      outline:none;
      font-size:13px;
      transition: border-color .15s ease, box-shadow .15s ease;
      resize: vertical;
    }
    .input{ height:40px; padding:0 12px; }
    .input:focus,.select:focus,.textarea:focus{
      border-color: rgba(176,75,255,.45);
      box-shadow: 0 0 0 4px rgba(176,75,255,.12);
    }
    .hint{ font-size:11px; color:var(--faint); line-height:1.35; }
    .row{ display:flex; gap:10px; flex-wrap:wrap; margin-top:10px; align-items:center; justify-content:flex-end; }

    details{
      border:1px solid var(--stroke-2);
      border-radius: 16px;
      background: rgba(0,0,0,.16);
      padding: 10px 10px;
    }
    summary{
      cursor:pointer;
      list-style:none;
      user-select:none;
      display:flex; align-items:center; justify-content:space-between;
      font-weight:900;
      color: rgba(255,255,255,.88);
      font-size: 12px;
    }
    summary::-webkit-details-marker{ display:none; }

    .list{ display:flex; flex-direction:column; gap:10px; }
    .leagueCard{
      border:1px solid var(--stroke);
      border-radius:var(--r-xl);
      background: rgba(0,0,0,.16);
      overflow:hidden;
    }
    .leagueTop{ display:flex; align-items:center; justify-content:space-between; gap:10px; padding:12px; }
    .leagueLeft{ display:flex; align-items:center; gap:10px; min-width:0; }
    .sqLogo{
      width:42px; height:42px; border-radius:14px;
      border:1px solid rgba(255,255,255,.14);
      background:
        radial-gradient(16px 16px at 30% 30%, rgba(255,255,255,.18), transparent 60%),
        linear-gradient(135deg, rgba(176,75,255,.38), rgba(0,0,0,.2));
      overflow:hidden; flex:0 0 auto;
      display:flex; align-items:center; justify-content:center;
      color:rgba(255,255,255,.7); font-weight:900; font-size:12px;
    }
    .sqLogo img{ width:100%; height:100%; object-fit:cover; display:block; }
    .leagueInfo{ min-width:0; display:flex; flex-direction:column; gap:2px; }
    .leagueName{
      font-size:13px; font-weight:900; letter-spacing:.2px;
      white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
      max-width: 340px;
    }
    .leagueMeta{ font-size:12px; color:var(--muted); display:flex; gap:10px; flex-wrap:wrap; }
    .badge{
      display:inline-flex; align-items:center; gap:6px;
      padding:6px 10px; border-radius:999px; border:1px solid var(--stroke);
      background: rgba(255,255,255,.05);
      font-size:12px; color:var(--muted);
    }
    .badge .bDot{ width:6px; height:6px; border-radius:99px; background:var(--accent); box-shadow:0 0 0 3px rgba(176,75,255,.12); }

    /* overlay modal */
    .overlay{
      position:fixed; inset:0;
      background: rgba(0,0,0,.55);
      backdrop-filter: blur(10px);
      display:none; align-items:center; justify-content:center;
      z-index:20; padding:18px;
    }
    .overlay.show{ display:flex; }
    .modal{
      width: min(1040px, 100%);
      border:1px solid var(--stroke);
      border-radius:20px;
      background: linear-gradient(180deg, rgba(16, 22, 45, .92), rgba(12, 16, 35, .90));
      box-shadow: var(--shadow);
      overflow:hidden;
      max-height: calc(100vh - 36px);
      display:flex; flex-direction:column;
    }
    .modalHead{
      display:flex; align-items:center; justify-content:space-between;
      padding:14px; gap:10px;
      border-bottom:1px solid var(--stroke-2);
      background: linear-gradient(180deg, rgba(0,0,0,.12), transparent);
      flex: 0 0 auto;
    }
    .modalTitle{ display:flex; align-items:center; gap:10px; min-width:0; }
    .modalTitle .txt{ min-width:0; display:flex; flex-direction:column; gap:2px; }
    .modalTitle h3{ margin:0; font-size:13px; letter-spacing:.2px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
    .modalTitle p{ margin:0; font-size:12px; color:var(--muted); }
    .modalBody{ padding:12px 14px 14px; overflow:auto; flex: 1 1 auto; }

    .tabs{ display:flex; gap:8px; flex-wrap:wrap; margin-bottom:12px; }
    .tab{
      padding:9px 10px;
      border-radius:999px;
      border:1px solid var(--stroke);
      background: rgba(0,0,0,.18);
      color:var(--muted);
      font-size:12px;
      cursor:pointer;
      font-weight:900;
    }
    .tab.active{
      color: rgba(255,255,255,.92);
      border-color: rgba(176,75,255,.34);
      background: rgba(176,75,255,.16);
      box-shadow: 0 0 0 4px rgba(176,75,255,.08);
    }

    .split{ display:grid; grid-template-columns: 1fr 1fr; gap:12px; align-items:start; }
    @media (max-width:860px){ .split{ grid-template-columns:1fr; } }

    .panel{
      border:1px solid var(--stroke);
      border-radius:18px;
      background: rgba(0,0,0,.16);
      overflow:hidden;
      display:flex; flex-direction:column;
      min-height: 220px;
    }
    .panelHead{
      padding:12px;
      border-bottom:1px solid var(--stroke-2);
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      flex: 0 0 auto;
    }
    .panelHead strong{ font-size:13px; letter-spacing:.2px; }
    .panelHead span{ font-size:12px; color:var(--muted); }
    .panelBody{ padding:12px; flex: 1 1 auto; }
    .scrollY{ overflow:auto; -webkit-overflow-scrolling: touch; overscroll-behavior: contain; }

    .seasonList{ display:flex; flex-direction:column; gap:10px; }
    .seasonRow{
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      padding:10px 10px;
      border-radius:16px;
      border:1px solid var(--stroke-2);
      background: rgba(255,255,255,.03);
    }
    .seasonRow:hover{ border-color: rgba(176,75,255,.22); background: rgba(176,75,255,.06); }
    .seasonRow .left{ display:flex; flex-direction:column; gap:2px; min-width:0; }
    .seasonRow .name{ font-weight:900; font-size:13px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
    .seasonRow .meta{ font-size:11px; color: var(--muted); }
    .seasonBtns{ display:flex; gap:8px; align-items:center; }
    .miniIconBtn{
      width:34px; height:34px;
      border-radius:12px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.18);
      color: rgba(255,255,255,.82);
      cursor:pointer; font-weight:900;
    }
    .miniIconBtn.danger{ border-color: rgba(255,77,109,.26); background: rgba(255,77,109,.10); }

    .teamList{ display:grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 10px; }
    @media (max-width: 820px){ .teamList{ grid-template-columns: 1fr; } }
    .teamCard{
      display:flex; align-items:center; justify-content:space-between;
      gap:10px;
      padding:10px 10px;
      border-radius:16px;
      border:1px solid var(--stroke-2);
      background: rgba(255,255,255,.03);
    }
    .teamCard:hover{ border-color: rgba(176,75,255,.22); background: rgba(176,75,255,.06); }
    .teamCard.selected{
      border-color: rgba(176,75,255,.38);
      background: rgba(176,75,255,.10);
      box-shadow: 0 0 0 4px rgba(176,75,255,.08);
    }
    .pick{
      all: unset;
      cursor:pointer;
      display:flex; align-items:center; gap:10px;
      min-width:0; flex: 1 1 auto;
    }
    .teamTxt{ min-width:0; display:flex; flex-direction:column; gap:2px; }
    .teamName{ font-size:13px; font-weight:900; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
    .teamHint{ font-size:11px; color:var(--muted); }
    .xBtn{
      width:34px; height:34px;
      border-radius:12px;
      border:1px solid rgba(255,77,109,.26);
      background: rgba(255,77,109,.08);
      color: rgba(255,255,255,.88);
      cursor:pointer; font-weight:900; line-height:1;
      flex:0 0 auto;
    }

    .fileBtn{
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      padding:10px 12px; border-radius:12px;
      border:1px solid var(--stroke);
      background: rgba(0,0,0,.22);
    }
    .fileBtn input[type="file"]{ width:100%; color:var(--muted); font-size:12px; }

    /* Division UI */
    .chipScroller{
      display:flex; gap:10px; align-items:center;
      overflow:auto; -webkit-overflow-scrolling: touch; overscroll-behavior: contain;
      max-width: min(720px, 56vw);
      padding-bottom: 2px;
    }
    .divBtn{
      display:flex; align-items:center; gap:8px;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid var(--stroke);
      background: rgba(0,0,0,.20);
      color: rgba(255,255,255,.86);
      font-weight: 900;
      font-size: 12px;
      cursor:pointer;
      white-space:nowrap;
    }
    .divBtn.active{
      border-color: rgba(176,75,255,.34);
      background: rgba(176,75,255,.16);
      box-shadow: 0 0 0 4px rgba(176,75,255,.08);
    }
    .divIcon{
      width:22px; height:22px; border-radius: 10px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.05);
      overflow:hidden;
      display:flex; align-items:center; justify-content:center;
      font-weight: 950;
      color: rgba(255,255,255,.70);
      flex: 0 0 auto;
      font-size: 11px;
    }
    .divIcon img{ width:100%; height:100%; object-fit:cover; display:block; }

    .checkList{ display:flex; flex-direction:column; gap:8px; }
    .checkItem{
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      padding:10px 10px;
      border-radius:16px;
      border:1px solid var(--stroke-2);
      background: rgba(255,255,255,.03);
    }
    .checkLeft{ display:flex; align-items:center; gap:10px; min-width:0; }
    .checkLeft .nm{ font-weight:900; font-size:13px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
    .checkLeft .sub{ font-size:11px; color:var(--muted); }
    .toggle{ width:18px; height:18px; accent-color: var(--accent); }

    .small{ font-size:11px; color:var(--faint); line-height:1.35; }
    .hide{ display:none !important; }
    .footer{ margin-top:14px; color:var(--faint); font-size:12px; text-align:center; }

    /* season full screen */
    .seasonView{
      position: fixed; inset: 0; z-index: 40;
      display: none; flex-direction: column;
      background:
        radial-gradient(1200px 600px at 72% 16%, rgba(176,75,255,.18), transparent 55%),
        radial-gradient(700px 500px at 26% 92%, rgba(75,227,139,.06), transparent 55%),
        linear-gradient(180deg, rgba(7,10,18,.98), rgba(11,16,32,.98));
      backdrop-filter: blur(12px);
    }
    .seasonView.show{ display:flex; }
    body.season-open #homeApp{ display:none; }


    .seasonTop{ max-width: 1200px; width: 100%; margin: 0 auto; padding: 16px 18px 10px; }
    .seasonTopInner{
      display:flex; align-items:center; justify-content: space-between; gap: 10px;
      padding: 12px 12px;
      border-radius: 18px;
      border:1px solid var(--stroke);
      background: rgba(0,0,0,.20);
      box-shadow: var(--shadow-soft);
    }
    .seasonTitle{ display:flex; align-items:center; gap:10px; min-width: 0; }
    .seasonTitle .t{ min-width:0; display:flex; flex-direction: column; gap: 2px; }
    .seasonTitle .t .l1{ font-weight: 950; font-size: 13px; white-space: nowrap; overflow:hidden; text-overflow: ellipsis; max-width: 42vw; }
    .seasonTitle .t .l2{ font-size: 12px; color: var(--muted); white-space: nowrap; overflow:hidden; text-overflow: ellipsis; max-width: 42vw; }
    .seasonTopRight{ display:flex; gap:8px; align-items:center; justify-content:flex-end; flex-wrap:wrap; }
    .chipBar{ display:flex; gap:8px; align-items:center; max-width: 56vw; }
    .chipToggle{ font-weight:950; }
    .chipWrap{
      display:flex; gap:8px; align-items:center;
      overflow:auto; max-width: min(740px, 56vw);
      -webkit-overflow-scrolling: touch; overscroll-behavior: contain;
      padding-bottom: 2px;
    }
    .seasonChip{
      padding: 8px 10px;
      border-radius: 999px;
      border:1px solid var(--stroke);
      background: rgba(0,0,0,.22);
      color: var(--muted);
      font-size: 12px;
      font-weight: 950;
      cursor: pointer;
      white-space: nowrap;
      display:flex; align-items:center; gap:8px;
    }
    .seasonChip.active{
      color: rgba(255,255,255,.92);
      border-color: rgba(176,75,255,.34);
      background: rgba(176,75,255,.16);
      box-shadow: 0 0 0 4px rgba(176,75,255,.08);
    }
    .chipDot{ width:6px; height:6px; border-radius:99px; background: rgba(255,255,255,.55); }

    .seasonBody{ max-width: 1200px; width: 100%; margin: 0 auto; padding: 6px 18px 22px; flex: 1 1 auto; overflow: auto; }

    .toast{
      position:fixed; left:50%; bottom:18px;
      transform: translateX(-50%);
      background: rgba(0,0,0,.55);
      border:1px solid var(--stroke);
      padding:10px 12px;
      border-radius:999px;
      font-size:12px;
      color:var(--text);
      box-shadow: var(--shadow-soft);
      backdrop-filter: blur(10px);
      opacity:0; pointer-events:none;
      transition: opacity .18s ease, transform .18s ease;
      z-index:50;
    }
    .toast.show{ opacity:1; transform: translateX(-50%) translateY(-2px); }
  
    .sectionTabs{
      display:flex; gap:10px; align-items:center; justify-content:flex-start;
      flex-wrap:wrap;
      padding: 0;
    }
    .sectionBtn{
      padding: 9px 12px;
      border-radius: 14px;
      border:1px solid var(--stroke);
      background: rgba(0,0,0,.20);
      color: var(--muted);
      font-size: 12px;
      font-weight: 950;
      cursor:pointer;
      display:flex; align-items:center; gap:8px;
      white-space:nowrap;
    }
    .sectionBtn.active{
      color: rgba(255,255,255,.92);
      border-color: rgba(176,75,255,.34);
      background: rgba(176,75,255,.16);
      box-shadow: 0 0 0 4px rgba(176,75,255,.08);
    }
    .sectionIcon{
      width:22px; height:22px; border-radius: 11px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      display:flex; align-items:center; justify-content:center;
      font-weight: 950;
      color: rgba(255,255,255,.72);
      flex:0 0 auto;
      font-size: 11px;
    }
    .matchList{ display:flex; flex-direction:column; gap:10px; }
/* Force vertical stacking (disable any previous horizontal/grid layout) */
.matchList{ display:flex !important; flex-direction:column !important; flex-wrap:nowrap !important; }
.matchRow{ width:100% !important; }

    .matchRow{
      padding:12px 12px;
      border-radius:16px;
      border:1px solid var(--stroke-2);
      background: rgba(255,255,255,.03);
    }
    .matchRow:hover{ border-color: rgba(176,75,255,.22); background: rgba(176,75,255,.06); }

    .matchCenter{
      display:grid;
      grid-template-columns: 1fr auto 1fr;
      gap:12px;
      align-items:center;
      width:100%;
    }

    .teamBox{
      display:flex;
      align-items:center;
      gap:10px;
      padding:10px 12px;
      border-radius:16px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.14);
      min-width:0;
    }
    .teamBox.left{ justify-content:flex-start; }
    .teamBox.right{ justify-content:flex-end; }

    .teamBox .text{
      display:flex;
      flex-direction:column;
      gap:3px;
      min-width:0;
    }
    .teamBox.left .text{ align-items:flex-start; text-align:left; }
    .teamBox.right .text{ align-items:flex-end; text-align:right; }

    .teamBox .tag{
      font-size:10px;
      letter-spacing:.14em;
      font-weight: 950;
      line-height: 1;
      opacity:.95;
    }
    .teamBox .tag.home{ color: rgba(255,90,90,.92); }
    .teamBox .tag.away{ color: rgba(95,170,255,.92); }

    .teamBox .name{
      font-weight: 950;
      font-size: 13px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      max-width: 100%;
    }

    .scoreBox{
      display:flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      padding:10px 12px;
      border-radius:16px;
      border:1px solid var(--stroke);
      background: rgba(0,0,0,.18);
      flex:0 0 auto;
    }
    .scoreBox input{
      width:46px; height:34px;
      border-radius:12px;
      border:1px solid var(--stroke);
      background: rgba(0,0,0,.22);
      color: rgba(255,255,255,.92);
      font-weight: 950;
      text-align:center;
      outline:none;
    }

    @media (max-width: 760px){
      .matchCenter{ grid-template-columns: 1fr; }
      .scoreBox{ justify-content:flex-start; }
      .teamBox.right{ justify-content:flex-start; }
      .teamBox.right .text{ align-items:flex-start; text-align:left; }
    }
    .matchRight{ display:flex; align-items:center; gap:8px; justify-content:flex-end; flex: 0 0 auto; }
    .roundScroller{
      display:flex; gap:8px; align-items:center;
      overflow:auto; -webkit-overflow-scrolling: touch; overscroll-behavior: contain;
      padding-bottom:2px;
      max-width: 100%;
    }
    .roundBtn{
      padding: 8px 10px;
      border-radius: 999px;
      border:1px solid var(--stroke);
      background: rgba(0,0,0,.22);
      color: var(--muted);
      font-size: 12px;
      font-weight: 950;
      cursor:pointer;
      white-space:nowrap;
    }
    .roundBtn.active{
      color: rgba(255,255,255,.92);
      border-color: rgba(176,75,255,.34);
      background: rgba(176,75,255,.16);
      box-shadow: 0 0 0 4px rgba(176,75,255,.08);
    }

    /* ===== Standings (順位表) ===== */
    .standingsWrap{
      border:1px solid rgba(255,255,255,.09);
      border-radius:16px;
      background: rgba(10,12,20,.34);
      box-shadow: 0 10px 28px rgba(0,0,0,.25);
      overflow:hidden;
    }
    .standingsHeader{
      display:flex; align-items:center; justify-content:space-between;
      gap:12px; padding:12px 14px;
      border-bottom:1px solid rgba(255,255,255,.08);
    }
    .standingsHeader .hint{opacity:.75; font-size:12px}
    .standingsTableWrap{overflow:auto}
    table.standings{width:100%; border-collapse:collapse; font-size:13px}
    table.standings thead th{
      text-align:left; font-weight:700; color:rgba(255,255,255,.8);
      padding:10px 10px; border-bottom:1px solid rgba(255,255,255,.08);
      white-space:nowrap;
    }
    table.standings tbody td{
      padding:10px 10px; border-bottom:1px solid rgba(255,255,255,.06);
      vertical-align:middle;
    }
    table.standings tbody tr:hover{background: rgba(255,255,255,.03)}
    .rankCell{width:54px; position:relative; padding-left:16px !important}
    .rankLine{position:absolute; left:6px; top:10px; bottom:10px; width:3px; border-radius:3px; background:transparent}
    .rankNum{font-weight:800}
    .teamCell{min-width:180px}
    .teamInline{display:flex; align-items:center; gap:10px}
    .teamLogo{width:26px; height:26px; border-radius:10px; overflow:hidden; border:1px solid rgba(255,255,255,.12); background: rgba(255,255,255,.04); flex:0 0 auto; display:flex; align-items:center; justify-content:center}
    .teamLogo img{width:100%; height:100%; object-fit:cover}
    .teamName{font-weight:700}
    .numCell{width:58px; text-align:center}
    .ptsCell{width:70px; text-align:center; font-weight:900}
    .gdCell{width:60px; text-align:center}
    .formCell{width:140px}
    .formDots{display:flex; gap:6px; justify-content:flex-start}
    .dot{width:12px; height:12px; border-radius:999px; border:1px solid rgba(255,255,255,.35); background:transparent}
    .dot.win{background: rgba(76, 230, 128, .85); border-color: rgba(76,230,128,.95)}
    .dot.draw{background: rgba(200,200,200,.6); border-color: rgba(220,220,220,.7)}
    .dot.loss{background: rgba(255, 86, 86, .82); border-color: rgba(255,86,86,.95)}
    .legendRow{display:flex; flex-wrap:wrap; gap:10px; padding:10px 14px}
    .legendItem{display:flex; align-items:center; gap:8px; padding:6px 10px; border:1px solid rgba(255,255,255,.08); border-radius:999px; background: rgba(255,255,255,.03); font-size:12px; opacity:.92}
    .legendSwatch{width:10px; height:10px; border-radius:999px; background:#fff}

    /* rank marker editor (ディビジョン編集) */
    .markerList{display:flex; flex-direction:column; gap:8px; margin-top:8px}
    .markerRow{display:flex; flex-wrap:wrap; gap:8px; align-items:center; padding:10px; border:1px solid rgba(255,255,255,.08); border-radius:12px; background: rgba(255,255,255,.03)}
    .markerRow input[type="text"]{flex:1 1 160px}
    .markerRow .miniNum{width:88px}
    .markerRow .miniColor{width:52px; height:36px; padding:0; border-radius:10px; overflow:hidden}
    .markerRow .miniBtn{padding:9px 10px}

  
    
  
    
  
    /* v16: unify heights across team boxes + score area */
    .matchRow{ padding: 12px 12px; }
    .matchGrid{ height: 72px; } /* stable row height (inside existing card row) */
    .teamBox{ height: 72px; }   /* same as grid */
    .teamInner{ height: 100%; }
    .teamName{
      line-height: 1;
      display:flex;
      align-items:center;
      height: 100%;
    }
    .scoreFixed{
      height: 72px;             /* match row height */
      align-items:center;
    }
    .scoreFixed input{
      height: 44px;
      line-height: 44px;
      padding: 0;
    }

  
    /* v19: one-row match layout (no vertical overlap) */
    .matchRow{
      padding: 10px 10px;
      flex-wrap: nowrap;
    }
    .matchLine{
      display: grid;
      grid-template-columns: minmax(280px, 1fr) 160px minmax(280px, 1fr);
      gap: 14px;
      align-items: center;
      width: 100%;
      min-width: 0;
    }
    @media (max-width: 860px){
      .matchLine{ grid-template-columns: 1fr 150px 1fr; gap: 10px; }
    }
    .teamCell{
      height: 64px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.02);
      padding: 0 14px;
      display:flex;
      align-items:center;
      min-width: 0;
      overflow: hidden; /* prevent wrapping */
    }
    .teamCell.left{ justify-content:flex-start; }
    .teamCell.right{ justify-content:flex-end; }

    .teamCellInner{
      display:flex;
      align-items:center;
      gap: 10px;
      width: 100%;
      min-width: 0;
      flex-wrap: nowrap; /* important */
    }
    .teamCell.right .teamCellInner{ flex-direction: row-reverse; }

    .teamName2{
      font-weight: 950;
      font-size: 13px;
      white-space: nowrap;        /* no multi-line */
      overflow: hidden;
      text-overflow: ellipsis;
      min-width: 0;
    }

    .scoreCell{
      height: 64px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.18);
      display:flex;
      align-items:center;
      justify-content:center;
      gap: 10px;
      flex-wrap: nowrap; /* no wrap */
    }
    .scoreCell input{
      width: 54px;
      height: 40px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.03);
      color: rgba(255,255,255,.88);
      font-weight: 950;
      text-align:center;
      outline:none;
      padding: 0;
    }
    .scoreDash2{
      width: 18px;
      text-align:center;
      font-weight: 950;
      color: rgba(255,255,255,.70);
      user-select:none;
    }

  
    /* v21: New Match UI (design-first) */
    .matchNewWrap{
      display:flex;
      flex-direction:column;
      gap: 12px;
    }
    .matchNewHeader{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      flex-wrap: wrap;
    }
    .roundScroller{
      display:flex;
      gap: 8px;
      overflow-x:auto;
      padding-bottom: 6px;
      -webkit-overflow-scrolling: touch;
    }
    .roundScroller::-webkit-scrollbar{ height: 6px; }
    .roundScroller::-webkit-scrollbar-thumb{ background: rgba(255,255,255,.10); border-radius: 999px; }
    .roundChip{
      flex: 0 0 auto;
      height: 34px;
      padding: 0 12px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.03);
      color: rgba(255,255,255,.82);
      font-weight: 900;
      font-size: 12px;
      display:flex;
      align-items:center;
      justify-content:center;
      cursor:pointer;
      user-select:none;
    }
    .roundChip.active{
      border-color: rgba(178,98,255,.55);
      background: rgba(178,98,255,.18);
      box-shadow: 0 0 0 1px rgba(178,98,255,.18) inset;
    }

    .matchBoard{
      display:flex;
      flex-direction:column;
      gap: 10px;
    }

    .mRow{
      width: 100%;
      padding: 10px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.02);
    }

    .mGrid{
      display:grid;
      grid-template-columns: minmax(260px,1fr) 160px minmax(260px,1fr);
      gap: 12px;
      align-items:center;
      width: 100%;
      min-width: 0;
    }
    @media (max-width: 860px){
      .mGrid{ grid-template-columns: 1fr 150px 1fr; gap: 10px; }
    }

    .mTeam{
      height: 64px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(0,0,0,.14);
      display:flex;
      align-items:center;
      padding: 0 12px;
      min-width: 0;
      overflow:hidden;
    }
    .mTeam.left{ justify-content:flex-start; }
    .mTeam.right{ justify-content:flex-end; }

    .mTeamInner{
      display:flex;
      align-items:center;
      gap: 10px;
      width: 100%;
      min-width: 0;
      flex-wrap: nowrap;
    }
    .mTeam.right .mTeamInner{ flex-direction: row-reverse; }

    .mName{
      font-weight: 950;
      font-size: 13px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      min-width: 0;
      color: rgba(255,255,255,.92);
    }
    .mSub{
      margin-top: 2px;
      font-size: 11px;
      color: rgba(255,255,255,.55);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      min-width: 0;
    }
    .mNameWrap{
      display:flex;
      flex-direction:column;
      min-width: 0;
    }

    .mScore{
      height: 64px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.03);
      display:flex;
      align-items:center;
      justify-content:center;
      gap: 10px;
      flex-wrap: nowrap;
    }
    .mScore input{
      width: 54px;
      height: 40px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.18);
      color: rgba(255,255,255,.92);
      font-weight: 950;
      text-align:center;
      outline:none;
      padding: 0;
    }
    .mDash{
      width: 18px;
      text-align:center;
      font-weight: 950;
      color: rgba(255,255,255,.70);
      user-select:none;
    }

    .mEmpty{
      padding: 16px;
      border-radius: 18px;
      border: 1px dashed rgba(255,255,255,.14);
      color: rgba(255,255,255,.58);
      font-size: 12px;
    }

  
    /* v22: fixed-size team boxes + left aligned board */
    .matchBoard{
      align-items: flex-start;
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
      padding-bottom: 6px;
    }
    .matchBoard::-webkit-scrollbar{ height: 6px; }
    .matchBoard::-webkit-scrollbar-thumb{ background: rgba(255,255,255,.10); border-radius: 999px; }

    .mRow{
      width: fit-content;
      max-width: 100%;
    }

    /* Fixed pixel boxes (same size) */
    .mGrid{
      grid-template-columns: 320px 160px 320px;
      justify-content: start;   /* left aligned */
      width: fit-content;       /* don't stretch to full */
      max-width: 100%;
    }
    .mTeam{
      width: 320px;             /* same width for both */
      height: 64px;             /* same height */
    }
    .mScore{
      width: 160px;
      height: 64px;
    }

    /* Make the inside layout stable */
    .mTeamInner{ width: 100%; }
    .mNameWrap{ min-width: 0; }

  
    /* v25: merge fresh schedule UI styles into main */

    /* v26: match list horizontal grid (max 5 columns) */
    .matchList{
      display:grid !important;
      grid-template-columns: repeat(5, minmax(260px, 1fr));
      gap:12px;
      align-items:stretch;
      justify-items:start;
    }
    .match{
      display:grid;
      grid-template-columns: 1fr 128px 1fr;
      gap:10px;
      align-items:center;
      width:100%;
      min-width:260px;
    }
    .teamBox, .scoreBox{
      height:72px;
    }
    .teamMeta{
      display:flex;
      flex-direction:column;
      gap:2px;
      min-width:0;
    }
    .haTag{
      font-size:10px;
      font-weight:900;
      letter-spacing:.06em;
      opacity:.9;
    }
    .haHome{ color: rgba(255, 90, 90, 0.95); }
    .haAway{ color: rgba(110, 170, 255, 0.95); }
    .scoreSideTag{
      font-size:10px;
      font-weight:900;
      width:14px;
      text-align:center;
      opacity:.9;
    }
    .scoreSideTag.h{ color: rgba(255, 90, 90, 0.95); }
    .scoreSideTag.a{ color: rgba(110, 170, 255, 0.95); }
    @media (max-width: 1400px){
      .matchList{ grid-template-columns: repeat(4, minmax(240px, 1fr)); }
    }
    @media (max-width: 1100px){
      .matchList{ grid-template-columns: repeat(3, minmax(240px, 1fr)); }
    }
    @media (max-width: 820px){
      .matchList{ grid-template-columns: repeat(2, minmax(220px, 1fr)); }
      .teamBox, .scoreBox{ height:68px; }
    }
    @media (max-width: 520px){
      .matchList{ grid-template-columns: 1fr; }
    }

    .matchList{
      display:flex;
      flex-direction:column;
      gap:10px;
      align-items:flex-start; /* left align */
    }
    .match{
      display:grid;
      grid-template-columns: 280px 140px 280px;
      gap:12px;
      align-items:center;
      width: fit-content;
    }
    .teamBox, .scoreBox{
      height:60px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.18);
      display:flex;
      align-items:center;
      padding:0 12px;
      box-sizing:border-box;
    }
    .teamBox{
      background:rgba(255,255,255,.02);
      overflow:hidden;
    }
    .teamBox.left{ justify-content:flex-start; }
    .teamBox.right{ justify-content:flex-end; }
    .teamInner{
      display:flex;
      align-items:center;
      gap:10px;
      width:100%;
      min-width:0;
      flex-wrap:nowrap;
    }
    .teamBox.right .teamInner{ flex-direction: row-reverse; }
    .teamName{
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      font-weight:900;
      font-size:13px;
      min-width:0;
    }
    .scoreBox{
      justify-content:center;
      background:rgba(0,0,0,.25);
      gap:8px;
      flex-wrap:nowrap;
    }
    .scoreBox input{
      width:48px;
      height:36px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,.18);
      background:rgba(255,255,255,.05);
      color:#fff;
      font-weight:900;
      text-align:center;
      padding:0;
      outline:none;
    }
    .scoreDash{
      color: rgba(255,255,255,.78);
      font-weight: 900;
      width: 14px;
      text-align:center;
      user-select:none;
    }
    @media (max-width: 860px){
      .match{ grid-template-columns: 240px 120px 240px; gap:10px; }
      .teamBox, .scoreBox{ height:58px; }
    }

  </style>
</head>

<body>
  <div class="app" id="homeApp">
    <header class="topbar">
      <div class="brand">
        <div class="logoMark" aria-hidden="true"></div>
        <div>
          <h1>League Builder</h1>
          <p>リーグ作成 / 管理 UI</p>
        </div>
      </div>
      <div class="actions">
        <div class="pill"><span class="dot" aria-hidden="true"></span> ローカル保存: ON</div>
        <button class="btn" id="btnReset">全消去</button>
      </div>
    </header>

    <main class="grid">
      <section class="card">
        <div class="cardHead">
          <div class="title">
            <h2>リーグを作成</h2>
            <p>コンパクト（詳細は開いて設定）</p>
          </div>
          <button class="btn primary" id="btnCreateLeague">リーグ追加</button>
        </div>

        <div class="cardBody">
          <div class="field">
            <div class="label">リーグ名（初期値）</div>
            <input class="input" id="nextLeagueName" />
            <div class="hint">基本は「固有名詞 + 番号」（例: League 3）。</div>
          </div>

          <div style="margin-top:10px;">
            <details>
              <summary>詳細設定 <span style="color:var(--muted); font-weight:950;">▾</span></summary>
              <div style="margin-top:10px; display:grid; gap:12px;">
                <div style="display:grid; grid-template-columns: 1fr 1fr; gap:12px;" class="form">
                  <div class="field">
                    <div class="label">リーグ形式（仮）</div>
                    <select class="select" id="format">
                      <option value="round_robin">総当たり</option>
                      <option value="home_away">H/A（2回戦）</option>
                    </select>
                    <div class="hint">※ 今はUI/保存まで。試合生成は次ステップ。</div>
                  </div>

                  <div class="field">
                    <div class="label">勝ち点（勝/分/負）</div>
                    <input class="input" id="points" placeholder="3 / 1 / 0" value="3 / 1 / 0" />
                    <div class="hint">※ 現段階は保存のみ。</div>
                  </div>

                  <div class="field">
                    <div class="label">チーム初期数（作成時に自動で追加）</div>
                    <input class="input" id="initialTeams" type="number" min="0" max="60" value="12" />
                    <div class="hint">作成したら Team 1 / Team 2 … を自動で入れる。</div>
                  </div>

                  <div class="field">
                    <div class="label">初期シーズン名（任意）</div>
                    <input class="input" id="initialSeasonName" placeholder="例：2025-26 / Season 1 など" />
                    <div class="hint">空なら Season 1 にします。</div>
                  </div>
                </div>

                <div class="row">
                  <button class="btn" id="btnExport">JSONを書き出し</button>
                </div>
              </div>
            </details>
          </div>
        </div>
      </section>

      <section class="card">
        <div class="cardHead">
          <div class="title">
            <h2>作成済みリーグ</h2>
            <p>コンパクト表示 → 管理ボタンで編集</p>
          </div>
          <div class="badge"><span class="bDot" aria-hidden="true"></span><span id="leagueCount">0 leagues</span></div>
        </div>

        <div class="cardBody">
          <div class="list" id="leagueList"></div>
          <div class="footer">データはブラウザ内に保存（localStorage）。</div>
        </div>
      </section>
    </main>
  </div>

  <!-- League modal -->
  <div class="overlay" id="leagueOverlay" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true">
      <div class="modalHead">
        <div class="modalTitle">
          <div class="sqLogo" id="leagueModalLogo" aria-hidden="true">L</div>
          <div class="txt">
            <h3 id="leagueModalTitle">リーグ管理</h3>
            <p id="leagueModalSub">設定・チーム管理・シーズン</p>
          </div>
        </div>
        <div style="display:flex; gap:8px; align-items:center;">
          <button class="btn danger" id="btnDeleteLeague">リーグ削除</button>
          <button class="btn" id="btnCloseLeague">閉じる</button>
        </div>
      </div>

      <div class="modalBody">
        <div class="tabs">
          <button class="tab active" data-tab="league">リーグ設定</button>
          <button class="tab" data-tab="seasons">シーズン</button>
          <button class="tab" data-tab="teams">チーム管理</button>
        </div>

        <div id="tab_league">
          <div class="split">
            <div class="panel">
              <div class="panelHead">
                <strong>基本情報</strong>
                <span id="leagueInfoMeta"></span>
              </div>
              <div class="panelBody scrollY">
                <div class="field">
                  <div class="label">リーグ名</div>
                  <input class="input" id="leagueEditName" />
                </div>

                <div class="field" style="margin-top:10px;">
                  <div class="label">リーグロゴ（写真から選択）</div>
                  <div class="fileBtn">
                    <input id="leagueLogoFile" type="file" accept="image/*" />
                  </div>
                  <div class="small">ロゴ表示は角丸の四角です。</div>
                </div>

                <div class="row">
                  <button class="btn" id="btnClearLeagueLogo">ロゴ削除</button>
                  <button class="btn primary" id="btnSaveLeague">保存</button>
                </div>
              </div>
            </div>

            <div class="panel">
              <div class="panelHead">
                <strong>ルール（保存のみ）</strong>
                <span class="muted">試合生成は次</span>
              </div>
              <div class="panelBody scrollY">
                <div class="field">
                  <div class="label">リーグ形式</div>
                  <select class="select" id="leagueEditFormat">
                    <option value="round_robin">総当たり</option>
                    <option value="home_away">H/A（2回戦）</option>
                  </select>
                </div>

                <div class="field" style="margin-top:10px;">
                  <div class="label">勝ち点（勝/分/負）</div>
                  <input class="input" id="leagueEditPoints" placeholder="3 / 1 / 0" />
                </div>

                <div class="row">
                  <button class="btn" id="btnToSeasons">シーズンへ</button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div id="tab_seasons" class="hide">
          <div class="split">
            <div class="panel">
              <div class="panelHead">
                <strong>シーズン一覧</strong>
                <span id="seasonCount" class="muted"></span>
              </div>
              <div class="panelBody" style="display:flex; flex-direction:column; gap:10px;">
                <div class="field">
                  <div class="label">次シーズン名（任意）</div>
                  <input class="input" id="newSeasonName" placeholder="例：2026-27 / Season 2 など" />
                  <div class="hint">空なら Season + 番号 で作成します。</div>
                </div>
                <div class="row" style="justify-content:flex-start; margin-top:0;">
                  <button class="btn primary" id="btnCreateSeason">次シーズン作成</button>
                </div>

                <div class="scrollY" style="max-height: 420px; padding-right: 2px;">
                  <div class="seasonList" id="seasonList"></div>
                </div>

                <div class="small">シーズンを「開く」で、そのシーズン画面に全画面で切り替え。</div>
              </div>
            </div>

            <div class="panel">
              <div class="panelHead">
                <strong>メモ</strong>
                <span class="muted">（ここは後で拡張）</span>
              </div>
              <div class="panelBody scrollY">
                <div class="small">今は「シーズン作成 / 切り替え」の土台だけ入れています。次ステップで、順位表・日程・結果入力をシーズン単位で持たせます。</div>
              </div>
            </div>
          </div>
        </div>

        <div id="tab_teams" class="hide">
          <div class="split">
            <div class="panel">
              <div class="panelHead">
                <strong>登録チーム</strong>
                <span id="teamCount"></span>
              </div>
              <div class="panelBody" style="display:flex; flex-direction:column; gap:10px;">
                <div class="row" style="justify-content:flex-start; margin-top:0;">
                  <button class="btn primary" id="btnAddTeam">チーム追加</button>
                </div>

                <div class="scrollY" style="max-height: 520px; padding-right:2px;">
                  <div class="teamList" id="teamList"></div>
                </div>

                <div class="small">チームをタップすると右側に詳細が出ます。</div>
              </div>
            </div>

            <div class="panel">
              <div class="panelHead">
                <strong>チーム詳細</strong>
                <span id="editingTeamMeta">未選択</span>
              </div>
              <div class="panelBody scrollY">
                <div id="teamEditorEmpty" style="border:1px dashed rgba(255,255,255,.14); border-radius:16px; padding:12px; color:rgba(255,255,255,.62); background:rgba(0,0,0,.12);">
                  左のチーム一覧からチームを選択してください。
                </div>

                <div id="teamEditorForm" class="hide">
                  <div class="field">
                    <div class="label">チーム名</div>
                    <input class="input" id="teamEditName" />
                  </div>

                  <div class="field" style="margin-top:10px;">
                    <div class="label">チームロゴ（写真から選択）</div>
                    <div class="fileBtn">
                      <input id="teamLogoFile" type="file" accept="image/*" />
                    </div>
                    <div class="small">ロゴ表示は角丸の四角です。</div>
                  </div>

                  <div class="field" style="margin-top:10px;">
                    <div class="label">コメント</div>
                    <textarea class="textarea" id="teamEditComment" rows="6" placeholder="例：スタイル、目標、メモなど"></textarea>
                  </div>

                  <div class="row">
                    <button class="btn" id="btnClearTeamLogo">ロゴ削除</button>
                    <button class="btn primary" id="btnSaveTeam">保存</button>
                    <button class="btn danger" id="btnDeleteTeam">チーム削除</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

      </div><!-- modalBody -->
    </div><!-- modal -->
  </div><!-- overlay -->

  <!-- Fullscreen Season View -->
  <div class="seasonView" id="seasonView" aria-hidden="true">
    <div class="seasonTop">
      <div class="seasonTopInner">
        <div class="seasonTitle">
          <div class="sqLogo" id="seasonLeagueLogo" aria-hidden="true">L</div>
          <div class="t">
            <div class="l1" id="seasonHeaderLeague">League</div>
            <div class="l2" id="seasonHeaderSeason">Season</div>
          </div>
        </div>

        <div class="seasonTopRight">
          <button class="btn ghost small" id="btnSeasonHome">ホーム</button>
          <button class="btn ghost small chipToggle" id="btnToggleSeasonChips">シーズン ▾</button>
          <div class="chipBar hide" id="seasonChipBar">
            <div class="chipWrap" id="seasonChips"></div>
          </div>
        </div>
      </div>
    </div>

    <div class="seasonBody" id="seasonBody">
      <!-- Division manage (collapsible) -->
      <div class="card">
        <div class="cardBody">
          <details id="divisionDetails" open>
            <summary>ディビジョン編集 <span style="color:var(--muted); font-weight:950;">▾</span></summary>

            <div style="margin-top:12px; display:grid; gap:12px;">
              <div style="display:grid; grid-template-columns: 1fr 1fr; gap:12px;">
                <div class="field">
                  <div class="label">ディビジョン名（任意）</div>
                  <input class="input" id="newDivisionName" placeholder="例：Division A / East など" />
                  <div class="hint">空なら Division + 番号 で作成します。</div>
                </div>
                <div class="field">
                  <div class="label">ディビジョンロゴ（写真から選択）</div>
                  <div class="fileBtn">
                    <input id="newDivisionLogoFile" type="file" accept="image/*" />
                  </div>
                  <div class="small">ロゴ表示は角丸の四角です。</div>
                </div>
              </div>

              <div class="row" style="justify-content:flex-start; margin-top:0;">
                <button class="btn primary" id="btnCreateDivision">ディビジョン追加</button>
              </div>

              <div class="small">下のディビジョンボタンを押すと、そのディビジョンを開いて編集できます。</div>

              <div class="scrollY" style="max-height: 220px; padding-right:2px;">
                <div class="seasonList" id="divisionButtonList"></div>
              </div>

              <div class="card" style="border-radius:18px; border:1px solid var(--stroke-2); background:rgba(0,0,0,.14);">
                <div class="cardHead" style="border-bottom:1px solid var(--stroke-2);">
                  <div class="title">
                    <h2>ディビジョン詳細</h2>
                    <p class="muted" id="divisionEditingMeta">未選択</p>
                  </div>
                  <div style="display:flex; gap:8px; align-items:center;">
                    <button class="btn danger small" id="btnDeleteDivision" disabled>削除</button>
                  </div>
                </div>
                <div class="cardBody">
                  <div id="divisionEditorEmpty" style="border:1px dashed rgba(255,255,255,.14); border-radius:16px; padding:12px; color:rgba(255,255,255,.62); background:rgba(0,0,0,.12);">
                    上のディビジョンボタンから選択してください。
                  </div>

                  <div id="divisionEditor" class="hide" style="display:grid; gap:12px;">
                    <div style="display:grid; grid-template-columns: 1fr 1fr; gap:12px;">
                      <div class="field">
                        <div class="label">ディビジョン名</div>
                        <input class="input" id="divisionEditName" />
                      </div>
                      <div class="field">
                        <div class="label">ディビジョンロゴ（写真から選択）</div>
                        <div class="fileBtn">
                          <input id="divisionEditLogoFile" type="file" accept="image/*" />
                        </div>
                        <div class="row" style="justify-content:flex-start; margin-top:0;">
                          <button class="btn small" id="btnClearDivisionLogo">ロゴ削除</button>
                        </div>
                      </div>
                    </div>

                    <div class="field">
                      <div class="label">参加チーム（チェックで選択）</div>
                      <div class="scrollY" style="max-height: 260px; padding-right:2px;">
                        <div class="checkList" id="divisionTeamChecklist"></div>
                      </div>
                      <div class="small">リーグで登録済みのチームから選べます。</div>
                    </div>

                    <div class="field">
                      <div class="label">順位カラー（凡例）</div>
                      <div class="small">順位表の左側に表示する細いラインです。順位範囲（例: 1〜1）ごとに色と名称を設定できます。</div>
                      <div id="divisionRankMarkers" class="markerList"></div>
                      <div class="row" style="justify-content:flex-start; gap:10px;">
                        <button class="btn small" id="btnAddRankMarker">凡例を追加</button>
                      </div>
                    </div>

                    <div class="row">
                      <button class="btn primary" id="btnSaveDivision">保存</button>
                    </div>
                  </div>
                </div>
              </div>

            </div>
          </details>
        </div>
      </div>

      <div style="height:12px;"></div>

      <!-- Season area + Division buttons moved here -->
      
      <div class="card">
        <div class="cardHead">
          <div class="title">
            <h2 id="seasonPageTitle">Season</h2>
            <p class="muted">ここに順位表 / 日程 / 結果入力を追加していく</p>
          </div>
          <div class="chipScroller" id="divisionChipsInSeason"></div>
        </div>
        <div class="cardBody">
          <div class="small" id="seasonBodyHint">
            次ステップで、シーズン/ディビジョンに紐づく順位表・試合日程・結果を保存します。
          </div>

          <div style="height:12px;"></div>

          <div class="sectionTabs" id="seasonSectionTabs">
            <button class="sectionBtn active" data-sec="schedule"><span class="sectionIcon">🗓</span>日程/結果</button>
            <button class="sectionBtn" data-sec="standings"><span class="sectionIcon">#</span>順位表</button>
            <button class="sectionBtn" data-sec="teams"><span class="sectionIcon">👥</span>チーム一覧</button>
          </div>

          <div style="height:12px;"></div>

          <!-- Section: schedule/results -->
          <div id="sec_schedule">
            <div class="panel" style="min-height: unset;">
              <div class="panelHead">
                <strong>ディビジョン日程 / 結果</strong>
                <span id="schedMeta" class="muted"></span>
              </div>
              <div class="panelBody">
                <div class="row" style="justify-content:flex-start; margin-top:0;">
                  <button class="btn primary small" id="btnGenerateSchedule">日程を作成</button>
                  <select class="select small" id="schedGenMode" style="height:32px; padding:0 10px; border-radius:12px;">
                    <option value="single">1回総当たり</option>
                    <option value="double">2回総当たり</option>
                  </select>
                  <button class="btn danger small" id="btnResetSchedule">日程リセット</button>
                </div>

                <div style="height:10px;"></div>

                <div class="roundScroller" id="roundScroller"></div>

                <div style="height:10px;"></div>

                <div class="matchList" id="matchList"></div>

                <div style="height:14px;"></div>

                <div class="panel" style="min-height: unset;">
                  <div class="panelHead">
                    <strong>任意の試合（リーグ全体）</strong>
                    <span class="muted">ディビジョン外</span>
                  </div>
                  <div class="panelBody">
                    <div style="display:grid; grid-template-columns: 1.2fr 1fr 1fr; gap:10px;">
                      <div class="field">
                        <div class="label">試合名（任意）</div>
                        <input class="input" id="customMatchName" placeholder="例：Super Cup / Friendly など" />
                      </div>
                      <div class="field">
                        <div class="label">ホーム</div>
                        <select class="select" id="customHome"></select>
                      </div>
                      <div class="field">
                        <div class="label">アウェイ</div>
                        <select class="select" id="customAway"></select>
                      </div>
                    </div>
                    <div class="row" style="justify-content:flex-start;">
                      <button class="btn primary small" id="btnAddCustomMatch">試合を追加</button>
                    </div>

                    <div class="small">※ この試合はリーグ全体の登録チームから作れます（ディビジョンに依存しません）。</div>

                    <div style="height:10px;"></div>
                    <div class="matchList" id="customMatchList"></div>
                  </div>
                </div>

              </div>
            </div>
          </div>

          <!-- placeholders -->
          <div id="sec_standings" class="hide">
            <div class="standingsWrap">
              <div class="standingsTitleRow">
                <div>
                  <div class="h">リーグ順位表</div>
                  <div class="small" id="standingsSub"></div>
                </div>
                <div class="small" style="opacity:.8">試合結果から自動計算</div>
              </div>

              <div class="standingsTableWrap">
                <table class="standingsTable" id="standingsTable"></table>
              </div>

              <div class="legend" id="standingsLegend"></div>
            </div>
          </div>

          <div id="sec_teams" class="hide">
            <div style="border:1px dashed rgba(255,255,255,.14); border-radius:16px; padding:12px; color:rgba(255,255,255,.62); background:rgba(0,0,0,.12);">
              チーム一覧は次で実装します。
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>

  <div class="toast" id="toast"></div>


  <script src="app.js"></script>
</body>
</html>
